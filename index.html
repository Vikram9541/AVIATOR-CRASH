<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crash Game</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header, #authSection {
      background: #222;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    button {
      background: #06f;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      margin: 5px;
      cursor: pointer;
    }
    #main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 10px;
    }
    #plane {
      width: 120px;
      height: auto;
    }
    #history {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 10px;
    }
    .history-item {
      padding: 4px 8px;
      border-radius: 4px;
      font-weight: bold;
    }
    #betControls, #controls {
      display: flex;
      gap: 10px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
  <header>
    <div id="balance">Balance: â‚¹0</div>
    <div>
      <button onclick="showLoginForm()">Login</button>
      <button onclick="showRegisterForm()">Register</button>
    </div>
  </header>  <div id="authSection" style="display: none; flex-direction: column; gap: 10px;">
    <input id="name" placeholder="Name (for new users)" style="display: none;" />
    <input id="mobile" placeholder="Mobile" />
    <input id="password" placeholder="Password" type="password" />
    <button onclick="submitAuth()">Submit</button>
  </div>  <div id="main">
    <div id="multiplier">Multiplier: 1.00x</div>
    <img id="plane" src="https://vikram9541.github.io/assets/Flight.png" alt="Plane" /><div id="betControls">
  <button onclick="changeBet(-25)">-25</button>
  <span id="betLabel">Bet: â‚¹25</span>
  <button onclick="changeBet(25)">+25</button>
</div>

<div id="controls">
  <button onclick="placeBet()">BET</button>
  <button onclick="cashOut()">CASHOUT</button>
</div>

<div id="history"></div>

  </div>  <script>
    const supabase = supabase.createClient(
      "https://angvxvuovzbfyxblogrv.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFuZ3Z4dnVvdnpiZnl4YmxvZ3J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1ODM5OTMsImV4cCI6MjA2ODE1OTk5M30.qaUc04sIxTc_aD5nPDKrCr3MeaDSJB_cs1gnL8C1vKU"
    );

    let currentUser = null;
    let balance = 0;
    let bet = 25;
    let multiplier = 1.0;
    let crashPoint = 2.0;
    let history = [];

    async function showLoginForm() {
      document.getElementById('authSection').style.display = 'flex';
      document.getElementById('name').style.display = 'none';
      authMode = 'login';
    }

    async function showRegisterForm() {
      document.getElementById('authSection').style.display = 'flex';
      document.getElementById('name').style.display = 'block';
      authMode = 'register';
    }

    async function submitAuth() {
      const name = document.getElementById('name').value;
      const mobile = document.getElementById('mobile').value;
      const password = document.getElementById('password').value;

      if (authMode === 'register') {
        await supabase.from('users').insert([{ name, mobile, password, balance: 0 }]);
        alert('Account created! Now login.');
      } else {
        const { data, error } = await supabase.from('users')
          .select('*')
          .eq('mobile', mobile)
          .eq('password', password);
        
        if (data.length > 0) {
          currentUser = data[0];
          balance = currentUser.balance;
          document.getElementById('balance').innerText = `Balance: â‚¹${balance}`;
          alert('Login successful');
        } else {
          alert('Invalid credentials');
        }
      }
    }

    function changeBet(delta) {
      if (bet + delta >= 25 && bet + delta <= balance) {
        bet += delta;
        document.getElementById('betLabel').innerText = `Bet: â‚¹${bet}`;
      }
    }

    function placeBet() {
      if (!currentUser) return alert('Login first!');
      if (balance >= bet) {
        balance -= bet;
        document.getElementById('balance').innerText = `Balance: â‚¹${balance}`;
      }
    }

    function cashOut() {
      const win = Math.round(bet * multiplier);
      balance += win;
      document.getElementById('balance').innerText = `Balance: â‚¹${balance}`;
      alert(`Cashed out â‚¹${win}`);
    }

    function startGameLoop() {
      setInterval(() => {
        multiplier += 0.05;
        document.getElementById('multiplier').innerText = `Multiplier: ${multiplier.toFixed(2)}x`;

        if (multiplier >= crashPoint) {
          addToHistory(crashPoint);
          alert(`ðŸ’¥ Crashed at ${crashPoint}x`);
          multiplier = 1.0;
          crashPoint = Math.random() * 3 + 1; // next round
        }
      }, 500);
    }

    function addToHistory(val) {
      history.unshift(val.toFixed(2) + 'x');
      history = history.slice(0, 6);
      const hDiv = document.getElementById('history');
      hDiv.innerHTML = '';
      for (const val of history) {
        const span = document.createElement('span');
        span.className = 'history-item';
        span.innerText = val;
        hDiv.appendChild(span);
      }
    }

    startGameLoop();
  </script></body>
</html>
