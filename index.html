<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crash Game</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: #222;
    }
    #history {
      display: flex;
      gap: 5px;
    }
    #menu button {
      background: #06f;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
    }
    #main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
    }
    #plane {
      width: 120px;
      position: relative;
    }
    #controls, #betControl {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    button {
      padding: 10px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
    }
    #loginForm, #existingLoginForm {
      display: none;
      flex-direction: column;
      gap: 5px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <header>
    <div id="history"></div>
    <div id="menu">
      <button onclick="showLoginTab('new')">Create Account</button>
      <button onclick="showLoginTab('existing')">Login</button>
      <button onclick="deposit()">Deposit</button>
    </div>
  </header>
  <div id="main">
    <div id="balance">Balance: ₹0</div>
    <div id="multiplier">1.00x</div>
    <img id="plane" src="assets/Flight.png" alt="Plane"><div id="betControl">
  <button onclick="changeBet(-25)">-25</button>
  <span id="betLabel">Bet: ₹25</span>
  <button onclick="changeBet(25)">+25</button>
</div>

<div id="controls">
  <button onclick="placeBet()">BET</button>
  <button onclick="cashOut()">CASHOUT</button>
</div>

<div id="loginForm">
  <input type="text" id="newName" placeholder="Name">
  <input type="text" id="newPhone" placeholder="Phone">
  <input type="password" id="newPassword" placeholder="Password">
  <button onclick="createAccount()">Create Account</button>
</div>

<div id="existingLoginForm">
  <input type="text" id="loginPhone" placeholder="Phone">
  <input type="password" id="loginPassword" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

  </div>  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>  <script>
    const supabase = supabase.createClient(
      'https://angvxvuovzbfyxblogrv.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFuZ3Z4dnVvdnpiZnl4YmxvZ3J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1ODM5OTMsImV4cCI6MjA2ODE1OTk5M30.qaUc04sIxTc_aD5nPDKrCr3MeaDSJB_cs1gnL8C1vKU'
    );

    let currentUser = null;
    let balance = 0;
    let bet = 25;

    function updateUI() {
      document.getElementById('balance').textContent = `Balance: ₹${balance}`;
      document.getElementById('betLabel').textContent = `Bet: ₹${bet}`;
    }

    function changeBet(delta) {
      if (bet + delta >= 25 && bet + delta <= balance) {
        bet += delta;
        updateUI();
      }
    }

    function showLoginTab(tab) {
      document.getElementById('loginForm').style.display = tab === 'new' ? 'flex' : 'none';
      document.getElementById('existingLoginForm').style.display = tab === 'existing' ? 'flex' : 'none';
    }

    async function createAccount() {
      const name = document.getElementById('newName').value;
      const phone = document.getElementById('newPhone').value;
      const password = document.getElementById('newPassword').value;

      const { data, error } = await supabase
        .from('players')
        .insert([{ name, mobile: phone, password, balance: 0 }]);

      if (error) return alert('Account creation failed');
      alert('Account created! Now login.');
    }

    async function login() {
      const phone = document.getElementById('loginPhone').value;
      const password = document.getElementById('loginPassword').value;

      const { data, error } = await supabase
        .from('players')
        .select('*')
        .eq('mobile', phone)
        .eq('password', password);

      if (error || !data.length) return alert('Login failed');

      currentUser = data[0];
      balance = currentUser.balance;
      updateUI();
      alert('Login successful');
    }

    function placeBet() {
      if (!currentUser || balance < bet) return alert('Not enough balance');
      balance -= bet;
      updateUI();
    }

    function cashOut() {
      const multiplier = parseFloat(document.getElementById('multiplier').textContent);
      const win = Math.round(bet * multiplier);
      balance += win;
      updateUI();
      alert(`Cashed out ₹${win}`);
    }

    async function deposit() {
      if (!currentUser) return alert('Login first');
      const amt = prompt('Enter deposit amount');
      const utr = prompt('Enter UTR after sending to vikram95@kotak');
      alert(`Request noted with UTR: ${utr}`);
    }
  </script></body>
</html>
